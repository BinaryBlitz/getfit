<h1>Cтатистика</h1>

<%= form_tag trainer_statistics_path, method: :get do %>
  <div class="form-inline form-group">
    <div class="form-group">
      <%= text_field_tag :from, nil, placeholder: 'Начало', class: 'form-control input-date' %>
    </div>

    <div class="form-group">
      <%= text_field_tag :to, nil, placeholder: 'Конец', class: 'form-control input-date' %>
    </div>

    <%= submit_tag 'Поиск', class: 'btn btn-primary' %>
  </div>
<% end %>

<table class="table">
  <thead>
    <tr>
      <th>№</th>
      <th>Название тренировки</th>
      <th>Количество</th>
      <th>Общая прибыль от продаж</th>
    </tr>
  </thead>

  <tbody>
    <% @statistics.programs.each do |program| %>
      <tr>
        <td><%= program.id %></td>
        <td><%= program.name %></td>
        <td><%= program.users_count %></td>
        <td><%= program.revenue %></td>
      </tr>
    <% end %>
    <tr>
      <td></td>
      <td></td>
      <td>Поступления по всем тренировкам:</td>
      <td><%= @statistics.revenue %></td>
    </tr>
  </tbody>
</table>

<table class="table">
  <tr>
    <td>Количество подписчиков</td>
    <td><%= @statistics.subscribers_count %></td>
  </tr>
  <tr>
    <td>Прибыль</td>
    <td><%= @statistics.total_revenue %></td>
  </tr>
</table>
